<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Klassendiagramm-Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: true });
    </script>
  </head>
  <body>
    <h1>Klassendiagramm-Generator</h1>
    <form>
      <label for="javaCode">Java-Klasse:</label><br>
      <textarea id="javaCode" name="javaCode"></textarea><br>
      <input type="button" value="Generieren" onclick="generateClassDiagram()">
    </form>
    <div id="classDiagram"></div>
  </body>
  <script>
      function generateClassDiagram() {
		  const javaCode = document.getElementById("javaCode").value.trim();
		  const classRegex = /class\s+(\w+)/;
		  const attributeRegex = /(public|private|protected)\s+(\w+)\s+(\w+)(\s*=\s*.+)?;/g;
		  const methodRegex = /(public|private|protected)\s+(\w+)\s+(\w+)\s*\(([^)]*)\)\s*:/g;
		
		  const className = javaCode.match(classRegex)[1];
		  const attributes = javaCode.match(attributeRegex);
		  const methods = javaCode.match(methodRegex);
		
		  let classDiagramDefinition = `classDiagram
		  class ${className} {
		  `;
		
		  for (let attribute of attributes) {
		    let [_, accessModifier, attributeType, attributeName, defaultValue] = attribute.split(/\s+/);
		    classDiagramDefinition += `${accessModifier} ${attributeName}: ${attributeType}
		  `;
		  }
		
		  for (let method of methods) {
		    let [_, accessModifier, returnType, methodName, parameters] = method.split(/\s+/);
		    classDiagramDefinition += `${accessModifier} ${methodName}(${parameters}): ${returnType}
		  `;
		  }
		
		  classDiagramDefinition += `}
		  `;
		
		  const classDiagramHtml = `<div class="mermaid">${classDiagramDefinition}</div>`;
		
		  document.getElementById("classDiagram").innerHTML = classDiagramHtml;
		  mermaid.init();
	  }
  </script>
</html>
